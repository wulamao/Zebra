# 设计初衷

    事件信息可以触发注册在该事件下的任务
    支持不同种类的任务（不限定回调函数的类型）

    事件应该能够传递参数

    存储事件的结构应该抽出来，方便更换数据结构
        考虑任务的添加、删除、查询、排序

    事件的存储结构使用队列，根据事件类型查找可以使用数组或者哈希表，方便加快速度，使用优先队列或者堆或者二叉树优化查找？


---

# EDA 事件驱动架构优势

◆ 并发执行
◆ 事件触发/数据触发/时间规则触发
◆ 实时/增量响应
◆ 分布式事件系统处理

# 事件驱动模型的适用条件

1 程序中有许多任务
2 任务之间高度独立（无需通信或者彼此等待）
3 等待事件时，任务会阻塞

 
    事件与回调函数，可能是1对n，也可能是n对1，如何处理？
    多重注册？
    一个事件标志下可以注册多个回调函数
    同一个回调函数可以注册在多个事件下

    同时发生的多个事件，如何触发回调函数？
    同时条件的界定？如在100ms内产生的事件？
    事件是否有顺序？如先单击再双击？
    是否定义一个多重事件标志？如单双击事件标志？
    多重事件标志可以由上一级事件触发，如单击之后回调相应的多重事件监测回调函数若时间和事件条件满足然后触发多重事件标志？

    （限定1对多）
    或许事件可以触发信号量，然后任务通过信号量进行判断。
---

    后续可以继续把对结构体的属性的操作封装成set和get函数

库文件的组织思考（java是一个类就是一个文件）
    具体功能：事件管理
    实体：
        
        管理线程 
            管理事件（执行事件管理策略，触发以及回调）
        事件容器
            缓存事件（存储事件的队列或者其他的数据结构，方便查找、排序）
        回调函数容器
            回调函数列表（保存注册在某事件下的相关回调函数）
        事件标志/消息对象
            事件/消息的类型变量（枚举型变量）
            或实时消息，如紧急的，优先级较高的信息
            或定时消息，周期性的，非精准事件触发的信息
            或行为消息，普通消息，如按键等操作信息
        事件对象
            描述具体事件（代表某种操作或行为，其属性可以作为回调策略执行的依据）
        回调函数对象
            描述具体回调函数（其属性可以用于优先级调度等策略）
        
    类：
        
        容器类 # 相应的数据结构
            属性
                当前容量
                最大容量
            方法
                创建容器
                删除容器
                # 扩展容量
                
                添加元素
                    头添加
                    尾添加
                删除元素
                查找元素
                排序元素
                遍历元素
                获取元素
                    首个元素
                    最后元素
                获取当前容量(是否为空)

        事件标志类
            属性
                按键单击消息等
            # 方法
                # 获取标志数量
                # 添加标志

        回调函数类 void *func(void *arg, void *context)
            属性
                识别ID
                优先序号
                事件传递参数
                事件上下文
                回调函数指针
            # 方法
                # 获取ID
                # 获取优先序号

        事件类 
            事件属性
                {事件类型，容器指针}
                事件传递参数（临时传递）
                事件描述串
                事件上下文环境（线程生命周期内传递）
            # 方法
                # 设置描述
                # 设置传递参数
                # 获取描述
                # 获取传递参数
        
        事件管理类 Manager  # 需注意，事件队列中自然含有时间上的顺序  
            # 属性
                # 事件管理ID
            接口 # 抽象，需要可扩展
                创建事件管理对象，创建容器
                删除事件管理对象，销毁容器
                事件入队
                事件出队
                

 